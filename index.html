<!Doctype HTML>
<html>

<head>
    <title> 3300 P1</title>
    <meta charset="UTF-8">
    <style>
  svg { border: solid black 2px; }
  </style>
    <script src="https://d3js.org/d3.v4.min.js"></script>
</head>

<body>
    <p> Visualize Data Here </p>
    <!-- <svg height="500" width="800" id="svg"></svg> -->
    <script id=>

// csvsql --query "select country, medal, count(*) from summerData where Year > 1985 group by country, medal" summerData.csv > summerMedalData.csv
// csvsql --query "select country, medal, count(*) from summerData where Year > 1985 group by country, medal" summerData.csv > winterMedalData.csv

        // snag the svg element from outside the script tag
        // var svg = d3.select("#svg");

        // // get the height/width of the svg element as variables
        // var width = document.getElementsByTagName("svg")[0].getAttribute("width");
        // var height = document.getElementsByTagName("svg")[0].getAttribute("height");

        // var summerData = []
        // var medalCount = {
        //  "data": {
        //      "1992": {},
        //      "1996": {},
        //      "2000": {},
        //      "2004": {},
        //      "2008": {},
        //      "2012": {}
        //  }
        // }
        // d3.csv("summer.csv", function(d) {
        //  if (d.Year >= 1992) {
        //      return {
        //          year: +d.Year,
        //          country: d.Country,
        //          medal: d.Medal
        //      };
        //  }
        // }, function(data) {
        //  console.log(data)
        //  data.forEach(function(d) {
        //      if (d.medal == "Gold") {
        //          if (medalCount.data[d.year][d.country] == undefined) {
        //              medalCount.data[d.year][d.country] = 0
        //          } else {
        //              medalCount.data[d.year][d.country] += 1
        //          }
        //      }
        //  });// forEach
        //  data.forEach(function(d) {
        //      if (d.medal == "Gold" && d.country == "USA") {
        //          medalCount.data[d.year][d.country] += 1
        //      }
        //  });// forEach
        //  console.log(medalCount)
        // });

        // // draw the equator line to the svg element
        // svg.append("line")
        // .attr("x1", 0)
        // .attr("y1", height/2)
        // .attr("x2", width)
        // .attr("y2", height/2)
        // .attr("stroke", "black")
        // .attr("stroke-width", 5)
        // .attr("opacity", 0.25);

    </script>

    <script id="GDPvMedals">
        var svgS = d3.select("body").append("svg")
        .attr("height", 400)
        .attr("width", 600);

        var svgW = d3.select("body").append("svg")
        .attr("height", 400)
        .attr("width", 600);

        d3.queue()
        .defer(d3.csv, "winterGDPMedalData.csv")
        .defer(d3.csv, "summerGDPMedalData.csv")
        .await(showGraph);



        function showGraph(error, wData, sData) {

            var xMax = d3.max(
                [
                d3.max(wData, function (d) {
                    return +d.GDP_per_Capita;
                }),
                d3.max(sData, function (d) {
                    return +d.GDP_per_Capita;
                })
                ]);

            svgS.append("text")
            .attr("x", 300)
            .attr("y", 50)
            .style("text-anchor", "middle")
            .text("Summer Medals Earned vs. GDP");
            var yMaxS = d3.max(sData, function (d) {return +d.Medals});

            var xScale = d3.scaleLinear()
            .domain([0,xMax])
            .range([100,500]);

            var yScaleS = d3.scaleLinear()
            .domain([0, yMaxS])
            .range([300,100]);

            var xAxis = d3.axisBottom(xScale);
            var yAxis = d3.axisLeft(yScaleS);

            svgS.append("g").call(xAxis).attr("transform","translate(0,300)");
            svgS.append("g").call(yAxis).attr("transform","translate(100,0)");

            console.log(sData[0]["count(*)"]);
            sData.forEach(function (d) {
                // console.log(+d["count(*)"]);
                svgS.append("circle")
                .attr("r", 2)
                .attr("cx", xScale(+d.GDP_per_Capita))
                .attr("cy", yScaleS(+d.Medals))
                .style("fill","black");
            })

            svgW.append("text")
            .attr("x", 300)
            .attr("y", 50)
            .style("text-anchor", "middle")
            .text("Winter Medals Earned vs. GDP");
            var yMaxW = d3.max(wData, function (d) {return +d.Medals});


            var yScaleW = d3.scaleLinear()
            .domain([0, yMaxW])
            .range([300,100]);

            var yAxisW = d3.axisLeft(yScaleW);


            svgW.append("g").call(xAxis).attr("transform","translate(0,300)");
            svgW.append("g").call(yAxisW).attr("transform","translate(100,0)");

            wData.forEach(function (d) {
                // console.log(+d["count(*)"]);
                svgW.append("circle")
                .attr("r", 2)
                .attr("cx", xScale(+d.GDP_per_Capita))
                .attr("cy", yScaleW(+d.Medals))
                .style("fill","black");
            })


        }
    </script>
</body>



</html>
